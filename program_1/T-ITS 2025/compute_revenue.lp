#include "T-ITS 2025/instances/network_NY_0.lp".
#include "T-ITS 2025/instances/init.lp".
#include "T-ITS 2025/instances/rq.lp".

% --- trajectory

% as(3,(jfk,jfk),0,9). as(16,(cri,cri),0,9). as(18,(jfk,jfk),0,9). as(31,(jfk,jfk),0,9). as(0,(jfk,jfk),0,10). as(1,(cri,cri),0,10). as(3,(jfk,jfk),0,10). as(13,(cri,cri),0,10). as(14,(cri,cri),0,10). as(16,(cri,cri),0,10). as(18,(jfk,jfk),0,10). as(26,(lga,lga),0,10). as(31,(jfk,jfk),0,10). as(32,(jfk,jfk),0,10). as(33,(lga,lga),0,10). as(0,(jfk,jfk),0,11). as(1,(cri,cri),0,11). as(3,(jfk,jfk),0,11). as(7,(ryend,ryend),0,11). as(8,(ryend,ryend),0,11). as(9,(lga,lga),0,11). as(13,(cri,cri),0,11). as(14,(cri,cri),0,11). as(15,(teb,teb),0,11). as(16,(cri,cri),0,11). as(17,(teb,teb),0,11). as(18,(jfk,jfk),0,11). as(19,(teb,teb),0,11). as(20,(cri,cri),0,11). as(24,(cimbl,cimbl),0,11). as(26,(lga,lga),0,11). as(27,(cimbl,cimbl),0,11). as(28,(dandy,dandy),0,11). as(29,(teb,teb),0,11). as(31,(jfk,jfk),0,11). as(32,(jfk,jfk),0,11). as(33,(lga,lga),0,11). as(0,(jfk,jfk),0,12). as(1,(cri,cri),0,12). as(2,(dandy,dandy),0,12). as(3,(jfk,jfk),0,12). as(4,(cimbl,cimbl),0,12). as(5,(cimbl,cimbl),0,12). as(6,(dandy,dandy),0,12). as(7,(ryend,ryend),0,12). as(8,(ryend,ryend),0,12). as(9,(lga,lga),0,12). as(10,(ryend,ryend),0,12). as(11,(ryend,ryend),0,12). as(12,(dandy,dandy),0,12). as(13,(cri,cri),0,12). as(14,(cri,cri),0,12). as(15,(teb,teb),0,12). as(16,(cri,cri),0,12). as(17,(teb,teb),0,12). as(18,(jfk,jfk),0,12). as(19,(teb,teb),0,12). as(20,(cri,cri),0,12). as(21,(cimbl,cimbl),0,12). as(22,(teb,teb),0,12). as(23,(ryend,ryend),0,12). as(24,(cimbl,cimbl),0,12). as(25,(ryend,ryend),0,12). as(26,(lga,lga),0,12). as(27,(cimbl,cimbl),0,12). as(28,(dandy,dandy),0,12). as(29,(teb,teb),0,12). as(30,(lga,lga),0,12). as(31,(jfk,jfk),0,12). as(32,(jfk,jfk),0,12). as(33,(lga,lga),0,12). as(0,(jfk,jfk),0,13). as(1,(cri,cri),0,13). as(2,(dandy,dandy),0,13). as(3,(jfk,jfk),0,13). as(4,(cimbl,cimbl),0,13). as(5,(cimbl,cimbl),0,13). as(6,(dandy,dandy),0,13). as(7,(ryend,ryend),0,13). as(8,(ryend,ryend),0,13). as(9,(lga,lga),0,13). as(10,(ryend,ryend),0,13). as(11,(ryend,ryend),0,13). as(12,(dandy,dandy),0,13). as(13,(cri,cri),0,13). as(14,(cri,cri),0,13). as(15,(teb,teb),0,13). as(16,(cri,cri),0,13). as(17,(teb,teb),0,13). as(18,(jfk,jfk),0,13). as(19,(teb,teb),0,13). as(20,(cri,cri),0,13). as(21,(cimbl,cimbl),0,13). as(22,(teb,teb),0,13). as(23,(ryend,ryend),0,13). as(24,(cimbl,cimbl),0,13). as(25,(ryend,ryend),0,13). as(26,(lga,lga),0,13). as(27,(cimbl,cimbl),0,13). as(28,(dandy,dandy),0,13). as(29,(teb,teb),0,13). as(30,(lga,lga),0,13). as(31,(jfk,jfk),0,13). as(32,(jfk,jfk),0,13). as(33,(lga,lga),0,13). as(0,(jfk,dandy),4,1). as(1,(lga,jfk),4,1). as(2,(teb,jfk),4,1). as(3,(ryend,jfk),4,1). as(4,(cri,dandy),4,1). as(5,(cimbl,dandy),4,1). as(6,(dandy,jfk),4,1). as(7,(jfk,dandy),4,1). as(8,(lga,jfk),4,1). as(9,(teb,jfk),4,1). as(10,(ryend,jfk),4,1). as(11,(cri,jfk),4,1). as(12,(cimbl,jfk),4,1). as(13,(dandy,jfk),4,1). as(14,(jfk,dandy),4,1). as(15,(lga,jfk),4,1). as(16,(teb,jfk),4,1). as(17,(ryend,jfk),4,1). as(18,(cri,teb),4,1). as(19,(cimbl,jfk),4,1). as(20,(dandy,jfk),4,1). as(21,(jfk,dandy),4,1). as(22,(lga,ryend),4,1). as(23,(teb,jfk),4,1). as(24,(ryend,jfk),4,1). as(25,(cri,teb),4,1). as(26,(cimbl,ryend),4,1). as(27,(dandy,jfk),4,1). as(28,(jfk,dandy),4,1). as(29,(lga,ryend),4,1). as(30,(teb,jfk),4,1). as(31,(ryend,jfk),4,1). as(32,(cri,dandy),4,1). as(33,(cimbl,teb),4,1). as(0,(dandy,jfk),4,2). as(1,(jfk,dandy),4,2). as(2,(jfk,teb),4,2). as(3,(jfk,ryend),4,2). as(4,(dandy,jfk),4,2). as(5,(dandy,jfk),4,2). as(6,(jfk,teb),4,2). as(7,(dandy,cri),4,2). as(8,(jfk,teb),4,2). as(9,(jfk,teb),4,2). as(10,(jfk,ryend),4,2). as(11,(jfk,teb),4,2). as(12,(jfk,teb),4,2). as(13,(jfk,teb),4,2). as(14,(dandy,cri),4,2). as(15,(jfk,ryend),4,2). as(16,(jfk,ryend),4,2). as(17,(jfk,ryend),4,2). as(18,(teb,jfk),4,2). as(19,(jfk,ryend),4,2). as(20,(jfk,ryend),4,2). as(21,(dandy,cri),4,2). as(22,(ryend,jfk),4,2). as(23,(jfk,teb),2,2). as(24,(jfk,cri),4,2). as(25,(teb,jfk),4,2). as(26,(ryend,jfk),4,2). as(27,(jfk,dandy),2,2). as(28,(dandy,cri),4,2). as(29,(ryend,lga),4,2). as(30,(jfk,dandy),4,2). as(31,(jfk,cri),4,2). as(32,(dandy,cri),4,2). as(33,(teb,cri),4,2). as(0,(jfk,cimbl),4,3). as(1,(dandy,cri),4,3). as(2,(teb,cri),4,3). as(3,(ryend,lga),4,3). as(4,(jfk,cri),4,3). as(5,(jfk,cimbl),4,3). as(6,(teb,cri),4,3). as(7,(cri,teb),4,3). as(8,(teb,cri),4,3). as(9,(teb,cri),4,3). as(10,(ryend,lga),4,3). as(11,(teb,cri),4,3). as(12,(teb,cimbl),4,3). as(13,(teb,dandy),4,3). as(14,(cri,teb),4,3). as(15,(ryend,lga),4,3). as(16,(ryend,lga),4,3). as(17,(ryend,lga),4,3). as(18,(jfk,cimbl),4,3). as(19,(ryend,lga),4,3). as(20,(ryend,cri),4,3). as(21,(cri,dandy),4,3). as(22,(jfk,lga),4,3). as(23,(teb,cri),4,3). as(24,(cri,teb),4,3). as(25,(jfk,cimbl),4,3). as(26,(jfk,cimbl),4,3). as(27,(dandy,cri),4,3). as(28,(cri,teb),4,3). as(29,(lga,ryend),4,3). as(30,(dandy,lga),4,3). as(31,(cri,dandy),4,3). as(32,(cri,teb),4,3). as(33,(cri,dandy),4,3). as(0,(cimbl,jfk),2,4). as(1,(cri,ryend),4,4). as(2,(cri,ryend),4,4). as(3,(lga,ryend),4,4). as(4,(cri,dandy),4,4). as(5,(cimbl,jfk),4,4). as(6,(cri,ryend),4,4). as(7,(teb,jfk),2,4). as(8,(cri,ryend),4,4). as(9,(cri,ryend),4,4). as(10,(lga,dandy),4,4). as(11,(cri,dandy),4,4). as(12,(cimbl,jfk),4,4). as(13,(dandy,lga),4,4). as(14,(teb,lga),4,4). as(15,(lga,ryend),4,4). as(16,(lga,dandy),4,4). as(17,(lga,dandy),4,4). as(18,(cimbl,jfk),4,4). as(19,(lga,dandy),4,4). as(20,(cri,ryend),4,4). as(21,(dandy,lga),4,4). as(22,(lga,ryend),4,4). as(23,(cri,ryend),4,4). as(24,(teb,ryend),4,4). as(25,(cimbl,jfk),4,4). as(26,(cimbl,jfk),4,4). as(27,(cri,ryend),2,4). as(28,(teb,lga),4,4). as(29,(ryend,cri),4,4). as(30,(lga,ryend),4,4). as(31,(dandy,lga),4,4). as(32,(teb,ryend),4,4). as(33,(dandy,lga),4,4). as(0,(jfk,cimbl),4,5). as(1,(ryend,teb),4,5). as(2,(ryend,teb),4,5). as(3,(ryend,cri),4,5). as(4,(dandy,lga),4,5). as(5,(jfk,lga),4,5). as(6,(ryend,teb),4,5). as(7,(jfk,cimbl),4,5). as(8,(ryend,teb),4,5). as(9,(ryend,teb),4,5). as(10,(dandy,jfk),2,5). as(11,(dandy,cri),2,5). as(12,(jfk,lga),4,5). as(13,(lga,dandy),4,5). as(14,(lga,dandy),4,5). as(15,(ryend,teb),4,5). as(16,(dandy,teb),4,5). as(17,(dandy,lga),2,5). as(18,(jfk,lga),4,5). as(19,(dandy,lga),4,5). as(20,(ryend,cri),4,5). as(21,(lga,cri),4,5). as(22,(ryend,lga),2,5). as(23,(ryend,cri),4,5). as(24,(ryend,cri),4,5). as(25,(jfk,lga),4,5). as(26,(jfk,lga),4,5). as(27,(ryend,cri),4,5). as(28,(lga,dandy),4,5). as(29,(cri,lga),4,5). as(30,(ryend,teb),4,5). as(31,(lga,cri),4,5). as(32,(ryend,cri),2,5). as(33,(lga,cri),4,5). as(0,(cimbl,cri),4,6). as(1,(teb,ryend),4,6). as(2,(teb,ryend),4,6). as(3,(cri,cimbl),4,6). as(4,(lga,cri),4,6). as(5,(lga,cri),4,6). as(6,(teb,lga),4,6). as(7,(cimbl,cri),4,6). as(8,(teb,lga),4,6). as(9,(teb,ryend),4,6). as(10,(jfk,lga),4,6). as(11,(cri,lga),4,6). as(12,(lga,jfk),4,6). as(13,(dandy,cimbl),4,6). as(14,(dandy,cimbl),4,6). as(15,(teb,lga),4,6). as(16,(teb,ryend),4,6). as(17,(lga,jfk),4,6). as(18,(lga,jfk),4,6). as(19,(lga,jfk),4,6). as(20,(cri,lga),4,6). as(21,(cri,lga),4,6). as(22,(lga,cri),4,6). as(23,(cri,lga),4,6). as(24,(cri,cimbl),4,6). as(25,(lga,teb),4,6). as(26,(lga,teb),4,6). as(27,(cri,lga),4,6). as(28,(dandy,cimbl),4,6). as(29,(lga,cri),4,6). as(30,(teb,ryend),4,6). as(31,(cri,cimbl),4,6). as(32,(cri,lga),4,6). as(33,(cri,cimbl),4,6). as(0,(cri,teb),2,7). as(1,(ryend,cimbl),4,7). as(2,(ryend,cimbl),4,7). as(3,(cimbl,cri),4,7). as(4,(cri,cimbl),4,7). as(5,(cri,cimbl),2,7). as(6,(lga,teb),4,7). as(7,(cri,cimbl),4,7). as(8,(lga,teb),4,7). as(9,(ryend,cimbl),4,7). as(10,(lga,teb),4,7). as(11,(lga,teb),4,7). as(12,(jfk,ryend),2,7). as(13,(cimbl,cri),4,7). as(14,(cimbl,cri),4,7). as(15,(lga,teb),4,7). as(16,(ryend,jfk),2,7). as(17,(jfk,cri),4,7). as(18,(jfk,cri),4,7). as(19,(jfk,cimbl),2,7). as(20,(lga,cimbl),4,7). as(21,(lga,ryend),1,7). as(22,(cri,dandy),2,7). as(23,(lga,cimbl),4,7). as(24,(cimbl,ryend),4,7). as(25,(teb,lga),4,7). as(26,(teb,lga),4,7). as(27,(lga,ryend),1,7). as(28,(cimbl,ryend),4,7). as(29,(cri,cimbl),4,7). as(30,(ryend,cimbl),4,7). as(31,(cimbl,cri),4,7). as(32,(lga,cimbl),4,7). as(33,(cimbl,cri),4,7). as(0,(teb,cri),2,8). as(1,(cimbl,lga),4,8). as(2,(cimbl,lga),4,8). as(3,(cri,jfk),4,8). as(4,(cimbl,lga),4,8). as(5,(cimbl,ryend),4,8). as(6,(teb,cimbl),4,8). as(7,(cimbl,dandy),4,8). as(8,(teb,cimbl),4,8). as(9,(cimbl,dandy),4,8). as(10,(teb,dandy),4,8). as(11,(teb,cimbl),4,8). as(12,(ryend,dandy),4,8). as(13,(cri,jfk),4,8). as(14,(cri,jfk),4,8). as(15,(teb,cimbl),4,8). as(16,(jfk,cri),4,8). as(17,(cri,lga),2,8). as(18,(cri,jfk),4,8). as(19,(cimbl,ryend),4,8). as(20,(cimbl,dandy),4,8). as(21,(ryend,cimbl),4,8). as(22,(dandy,cimbl),4,8). as(23,(cimbl,lga),4,8). as(24,(ryend,cimbl),4,8). as(25,(lga,cimbl),4,8). as(26,(lga,cimbl),4,8). as(27,(ryend,cimbl),4,8). as(28,(ryend,dandy),4,8). as(29,(cimbl,ryend),4,8). as(30,(cimbl,ryend),4,8). as(31,(cri,jfk),4,8). as(32,(cimbl,lga),4,8). as(33,(cri,jfk),4,8). as(0,(cri,jfk),2,9). as(1,(lga,cri),2,9). as(2,(lga,teb),2,9). as(4,(lga,dandy),2,9). as(5,(ryend,dandy),4,9). as(6,(cimbl,dandy),4,9). as(7,(dandy,cimbl),4,9). as(8,(cimbl,dandy),4,9). as(9,(dandy,cimbl),4,9). as(10,(dandy,ryend),4,9). as(11,(cimbl,teb),4,9). as(12,(dandy,ryend),4,9). as(13,(jfk,cri),4,9). as(14,(jfk,cri),2,9). as(15,(cimbl,dandy),4,9). as(17,(lga,cimbl),4,9). as(19,(ryend,dandy),4,9). as(20,(dandy,cimbl),4,9). as(21,(cimbl,teb),4,9). as(22,(cimbl,teb),4,9). as(23,(lga,cimbl),4,9). as(24,(cimbl,lga),4,9). as(25,(cimbl,teb),4,9). as(26,(cimbl,lga),4,9). as(27,(cimbl,teb),4,9). as(28,(dandy,teb),4,9). as(29,(ryend,dandy),4,9). as(30,(ryend,dandy),4,9). as(32,(lga,jfk),2,9). as(33,(jfk,lga),2,9). as(2,(teb,cimbl),4,10). as(4,(dandy,teb),4,10). as(5,(dandy,ryend),4,10). as(6,(dandy,ryend),4,10). as(7,(cimbl,ryend),2,10). as(8,(dandy,ryend),4,10). as(9,(cimbl,lga),2,10). as(10,(ryend,dandy),4,10). as(11,(teb,dandy),4,10). as(12,(ryend,teb),2,10). as(15,(dandy,teb),4,10). as(17,(cimbl,teb),4,10). as(19,(dandy,teb),4,10). as(20,(cimbl,cri),2,10). as(21,(teb,dandy),4,10). as(22,(teb,dandy),4,10). as(23,(cimbl,teb),2,10). as(24,(lga,cimbl),2,10). as(25,(teb,dandy),4,10). as(27,(teb,cimbl),4,10). as(28,(teb,dandy),4,10). as(29,(dandy,teb),4,10). as(30,(dandy,teb),4,10). as(2,(cimbl,dandy),2,11). as(4,(teb,cimbl),2,11). as(5,(ryend,cimbl),2,11). as(6,(ryend,dandy),2,11). as(10,(dandy,ryend),4,11). as(11,(dandy,ryend),4,11). as(12,(teb,dandy),2,11). as(21,(dandy,cimbl),2,11). as(22,(dandy,teb),2,11). as(23,(teb,ryend),2,11). as(25,(dandy,ryend),2,11). as(30,(teb,lga),2,11).



% --- encoding
remain_cust(E,N-P) :- request(_,E,N), P=#sum{W,D,X: as(D,E,W,X)}, edge(E).

total_remain(W) :- W = #sum{P,E:remain_cust(E,P)}.
wasted(F) :- F = #count{(L,L'),D,X : as(D,(L,L'), 0, X), L!=L'}.
% #show remain_cust/2.
#show total_remain/1.
#show wasted/1.
#show count(E,C):C=#count{D,E,W,X:as(D,E,W,X), W<4, distance(E,S), S!=0}, request(_,E,_), C>1.

